"use strict";(globalThis.webpackChunkhumanoid_robotics=globalThis.webpackChunkhumanoid_robotics||[]).push([[241],{72:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"modules/ros2/chapter1","title":"Chapter 1: Understanding ROS 2 as the Robotic Nervous System","description":"What Middleware Does in Humanoid Robotics","source":"@site/docs/modules/01-ros2/01-chapter1.md","sourceDirName":"modules/01-ros2","slug":"/modules/ros2/chapter1","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/modules/ros2/chapter1","draft":false,"unlisted":false,"editUrl":"https://github.com/spect-kit-plus/Hakathon_01/tree/main/Humanoid_Robotics/docs/modules/01-ros2/01-chapter1.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Module 1: The Robotic Nervous System (ROS 2)","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/modules/ros2/"},"next":{"title":"Chapter 2: Controlling Humanoids with rclpy","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/modules/ros2/chapter2"}}');var r=i(4848),o=i(8453);const t={},a="Chapter 1: Understanding ROS 2 as the Robotic Nervous System",l={},c=[{value:"What Middleware Does in Humanoid Robotics",id:"what-middleware-does-in-humanoid-robotics",level:2},{value:"ROS 2 Nodes, Topics, Services, and the Execution Graph",id:"ros-2-nodes-topics-services-and-the-execution-graph",level:2},{value:"Nodes: The Computational Processes",id:"nodes-the-computational-processes",level:3},{value:"Topics: The Message Bus for Data Streams",id:"topics-the-message-bus-for-data-streams",level:3},{value:"Services: The Request/Response Mechanism",id:"services-the-requestresponse-mechanism",level:3},{value:"The ROS 2 Execution Graph",id:"the-ros-2-execution-graph",level:3},{value:"How Messages Flow Through a Humanoid Robot",id:"how-messages-flow-through-a-humanoid-robot",level:2},{value:"Examples Using Simple Publisher\u2013Subscriber Patterns",id:"examples-using-simple-publishersubscriber-patterns",level:2},{value:"Python Publisher Node (<code>simple_publisher.py</code>)",id:"python-publisher-node-simple_publisherpy",level:3},{value:"Python Subscriber Node (<code>simple_subscriber.py</code>)",id:"python-subscriber-node-simple_subscriberpy",level:3}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"chapter-1-understanding-ros-2-as-the-robotic-nervous-system",children:"Chapter 1: Understanding ROS 2 as the Robotic Nervous System"})}),"\n",(0,r.jsx)(s.h2,{id:"what-middleware-does-in-humanoid-robotics",children:"What Middleware Does in Humanoid Robotics"}),"\n",(0,r.jsxs)(s.p,{children:["In the complex world of humanoid robotics, various components\u2014sensors, actuators, algorithms for perception, planning, and control\u2014need to communicate seamlessly. This is where ",(0,r.jsx)(s.strong,{children:"middleware"})," plays a crucial role. Middleware acts as a software layer that facilitates communication and data exchange between distributed components of a robotic system. It abstracts away the complexities of low-level networking, inter-process communication, and hardware interfaces, allowing developers to focus on the robot's functionality."]}),"\n",(0,r.jsx)(s.p,{children:'For humanoid robots, middleware is the "nervous system" that connects the "brain" (AI algorithms) to the "body" (motors, sensors). It enables:'}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Modularity"}),": Different parts of the robot's software can be developed and run independently."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Scalability"}),": Easily add new sensors, actuators, or processing units."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Flexibility"}),": Swap out components without re-architecting the entire system."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Real-time Communication"}),": Ensures timely delivery of critical control and sensor data."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"ROS 2 (Robot Operating System 2)"})," is the de-facto standard middleware for robotics development. It provides a flexible framework for writing robot software, offering a collection of tools, libraries, and conventions that simplify the creation of complex robotic applications."]}),"\n",(0,r.jsx)(s.h2,{id:"ros-2-nodes-topics-services-and-the-execution-graph",children:"ROS 2 Nodes, Topics, Services, and the Execution Graph"}),"\n",(0,r.jsx)(s.p,{children:"ROS 2 organizes a robot's software into interconnected components. Understanding these core concepts is fundamental to building any ROS 2-based robotic system."}),"\n",(0,r.jsx)(s.h3,{id:"nodes-the-computational-processes",children:"Nodes: The Computational Processes"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"Node"}),' is an executable process that performs computation. In a humanoid robot, each functional unit, such as "head camera driver," "left arm controller," "path planning algorithm," or "voice command interpreter," can be implemented as a separate ROS 2 node. Nodes communicate with each other to achieve the robot\'s overall mission.']}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Analogy"}),": Think of nodes as individual organs in a nervous system, each with a specific function."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"topics-the-message-bus-for-data-streams",children:"Topics: The Message Bus for Data Streams"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Topics"})," are named buses over which nodes exchange messages asynchronously. When a node wants to share data (e.g., sensor readings, joint states, processed images), it ",(0,r.jsx)(s.strong,{children:"publishes"})," messages to a topic. Other nodes interested in that data ",(0,r.jsx)(s.strong,{children:"subscribe"})," to the same topic. This publish-subscribe model enables one-to-many communication, making the system highly decoupled."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Analogy"}),": Topics are like nerves carrying sensory information or control signals throughout the body."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"services-the-requestresponse-mechanism",children:"Services: The Request/Response Mechanism"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Services"})," provide a synchronous request/response communication pattern. When a node needs a specific computation or action performed by another node and expects an immediate result, it makes a ",(0,r.jsx)(s.strong,{children:"service request"}),". The other node acts as a ",(0,r.jsx)(s.strong,{children:"service server"}),", processes the request, and sends back a ",(0,r.jsx)(s.strong,{children:"service response"}),"."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Analogy"}),": Services are like reflexes or specific commands where an immediate, dedicated response is expected."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"the-ros-2-execution-graph",children:"The ROS 2 Execution Graph"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.strong,{children:"ROS 2 execution graph"})," is a conceptual representation of all the ROS 2 elements (nodes, topics, services, actions) in a running system and how they are connected. It helps visualize the flow of data and control."]}),"\n",(0,r.jsx)(s.p,{children:"Here's a conceptual diagram of a simple ROS 2 execution graph:"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"ROS 2 Execution Graph Conceptual Diagram",src:i(7349).A+"",width:"600",height:"300"})}),"\n",(0,r.jsx)(s.h2,{id:"how-messages-flow-through-a-humanoid-robot",children:"How Messages Flow Through a Humanoid Robot"}),"\n",(0,r.jsx)(s.p,{children:'Consider a humanoid robot responding to a voice command to "walk forward." The message flow might look like this:'}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:['A "voice recognition" node (Node A) processes audio input and publishes a "text command" message to a ',(0,r.jsx)(s.code,{children:"/human_commands"})," topic."]}),"\n",(0,r.jsxs)(s.li,{children:['A "command interpreter" node (Node B) subscribes to ',(0,r.jsx)(s.code,{children:"/human_commands"}),', translates "walk forward" into a series of "base velocity" messages, and publishes them to a ',(0,r.jsx)(s.code,{children:"/cmd_vel"})," topic."]}),"\n",(0,r.jsxs)(s.li,{children:['A "base controller" node (Node C) subscribes to ',(0,r.jsx)(s.code,{children:"/cmd_vel"})," and translates these velocities into low-level motor commands for the robot's leg actuators."]}),"\n",(0,r.jsxs)(s.li,{children:['Meanwhile, a "camera driver" node publishes images to a ',(0,r.jsx)(s.code,{children:"/camera/image_raw"}),' topic, and a "perception" node subscribes to it to detect obstacles, potentially publishing "obstacle reports" to another topic.']}),"\n",(0,r.jsx)(s.li,{children:'If the "command interpreter" needs to know the robot\'s current pose, it might make a service request to a "localization" node for an immediate response.'}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"examples-using-simple-publishersubscriber-patterns",children:"Examples Using Simple Publisher\u2013Subscriber Patterns"}),"\n",(0,r.jsxs)(s.h3,{id:"python-publisher-node-simple_publisherpy",children:["Python Publisher Node (",(0,r.jsx)(s.code,{children:"simple_publisher.py"}),")"]}),"\n",(0,r.jsxs)(s.p,{children:['This node will publish a simple "Hello ROS 2" message to a ',(0,r.jsx)(s.code,{children:"/chatter"})," topic."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass SimplePublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('simple_publisher')\r\n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Hello ROS 2: {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    simple_publisher = SimplePublisher()\r\n    rclpy.spin(simple_publisher)\r\n    simple_publisher.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,r.jsxs)(s.h3,{id:"python-subscriber-node-simple_subscriberpy",children:["Python Subscriber Node (",(0,r.jsx)(s.code,{children:"simple_subscriber.py"}),")"]}),"\n",(0,r.jsxs)(s.p,{children:["This node will subscribe to the ",(0,r.jsx)(s.code,{children:"/chatter"})," topic and print received messages."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass SimpleSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('simple_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'chatter',\r\n            self.listener_callback,\r\n            10)\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    simple_subscriber = SimpleSubscriber()\r\n    rclpy.spin(simple_subscriber)\r\n    simple_subscriber.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,r.jsx)(s.p,{children:"To run these examples:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Open two terminals."}),"\n",(0,r.jsxs)(s.li,{children:["In each terminal, ",(0,r.jsx)(s.code,{children:"source /opt/ros/humble/setup.bash"})," (or your ROS 2 environment setup file)."]}),"\n",(0,r.jsxs)(s.li,{children:["In the first terminal, run the publisher: ",(0,r.jsx)(s.code,{children:"python simple_publisher.py"})]}),"\n",(0,r.jsxs)(s.li,{children:["In the second terminal, run the subscriber: ",(0,r.jsx)(s.code,{children:"python simple_subscriber.py"}),"\r\nYou should see messages being published and received."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"This concludes our exploration of the fundamental concepts of ROS 2 middleware."})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},7349:(e,s,i)=>{i.d(s,{A:()=>n});const n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPHJlY3QgeD0iNTAiIHk9IjUwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjYWRkOGU2IiBzdHJva2U9IiMzMzMiIHN0cm9rZS13aWR0aD0iMiIvPg0KICA8dGV4dCB4PSIxMDAiIHk9IjgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjMzMzIj5Ob2RlIEE8L3RleHQ+DQoNCiAgPHJlY3QgeD0iMjUwIiB5PSI1MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI1MCIgZmlsbD0iI2FkZDhlNiIgc3Ryb2tlPSIjMzMzIiBzdHJva2Utd2lkdGg9IjIiLz4NCiAgPHRleHQgeD0iMzAwIiB5PSI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzMzMyI+Tm9kZSBCPC90ZXh0Pg0KDQogIDxyZWN0IHg9IjQ1MCIgeT0iNTAiIHdpZHRoPSIxMDAiIGhlaWdodD0iNTAiIGZpbGw9IiNhZGQ4ZTYiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDx0ZXh0IHg9IjUwMCIgeT0iODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMzMzMiPk5vZGUgQzwvdGV4dD4NCg0KICA8cGF0aCBkPSJNMTUwIDc1IEgyNTAiIHN0cm9rZT0icmVkIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4NCiAgPHRleHQgeD0iMjAwIiB5PSI2NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0icmVkIj5Ub3BpYyAxPC90ZXh0Pg0KICA8cGF0aCBkPSJNMzUwIDc1IEg0NTAiIHN0cm9rZT0iZ3JlZW4iIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPg0KICA8dGV4dCB4PSI0MDAiIHk9IjY1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJncmVlbiI+VG9waWMgMjwvdGV4dD4NCiAgDQogIDxjaXJjbGUgY3g9IjEwMCIgY3k9IjE1MCIgcj0iMjAiIGZpbGw9IiNmZmNjY2IiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDx0ZXh0IHg9IjEwMCIgeT0iMTU1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzMzIj5TZXJ2aWNlIFJlcTwvdGV4dD4NCiAgPGxpbmUgeDE9IjEwMCIgeTE9IjE3MCIgeDI9IjMwMCIgeTI9IjIwMCIgc3Ryb2tlPSJwdXJwbGUiIHN0cm9rZS13aWR0aD0iMiIvPg0KICA8bGluZSB4MT0iMzAwIiB5MT0iMjAwIiB4Mj0iMTAwIiB5Mj0iMjMwIiBzdHJva2U9InB1cnBsZSIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDxjaXJjbGUgY3g9IjMwMCIgY3k9IjIwMCIgcj0iMjAiIGZpbGw9IiNmZmNjY2IiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDx0ZXh0IHg9IjMwMCIgeT0iMjA1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzMzIj5TZXJ2aWNlIFNydjwvdGV4dD4NCiAgPHRleHQgeD0iMjAwIiB5PSIxOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9InB1cnBsZSI+U2VydmljZSBBPC90ZXh0Pg0KDQogIDx0ZXh0IHg9IjMwMCIgeT0iMjcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEyIiBmaWxsPSIjMzMzIj5ST1MgMiBFeGVjdXRpb24gR3JhcGggKENvbmNlcHR1YWwpPC90ZXh0Pg0KPC9zdmc+DQo="},8453:(e,s,i)=>{i.d(s,{R:()=>t,x:()=>a});var n=i(6540);const r={},o=n.createContext(r);function t(e){const s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);